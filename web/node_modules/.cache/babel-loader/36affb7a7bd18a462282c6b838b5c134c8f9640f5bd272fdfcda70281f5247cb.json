{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { getLabelFromText } from \"@/apis\";\nconst __default__ = {\n  name: \"SearchList\"\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const route = useRoute();\n    let key_words = \"\";\n    let result_list = ref();\n    let failed = ref(false);\n    if (route.params.from == \"/\") {\n      key_words = route.query.query;\n      sessionStorage.setItem(\"query\", key_words);\n    } else {\n      key_words = sessionStorage.getItem(\"query\");\n    }\n    getLabelFromText('api/image/search', key_words).then(value => {\n      if (value.status == 200) {\n        result_list.value = value.data[\"labels\"];\n        if (result_list.value == null) {\n          failed.value = true;\n        }\n      }\n    });\n    const postSearch = (id, name_en, name_zh) => {\n      let params = {\n        name_en: name_en,\n        name_zh: name_zh\n      };\n      router.push({\n        name: 'plant',\n        query: {\n          id: id\n        },\n        state: {\n          params\n        }\n      });\n    };\n\n    /* let Result_list = ref([\n      {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n      {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n      {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n      {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n      {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n    ]); */\n\n    const __returned__ = {\n      router,\n      route,\n      get key_words() {\n        return key_words;\n      },\n      set key_words(v) {\n        key_words = v;\n      },\n      get result_list() {\n        return result_list;\n      },\n      set result_list(v) {\n        result_list = v;\n      },\n      get failed() {\n        return failed;\n      },\n      set failed(v) {\n        failed = v;\n      },\n      postSearch,\n      ref,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get getLabelFromText() {\n        return getLabelFromText;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"names":["ref","useRoute","useRouter","getLabelFromText","__default__","name","router","route","key_words","result_list","failed","params","from","query","sessionStorage","setItem","getItem","then","value","status","data","postSearch","id","name_en","name_zh","push","state"],"sources":["D:/大软/GiantIsopod-Front-main v1.0/web/src/views/SearchList.vue"],"sourcesContent":["<template>\n    <div>\n        <div style=\"height: 10vh;background-color: rgba(3,3,41,0.9);display: block;position: static\">\n            <img src=\"../assets/logo.png\" id=\"logo\">\n            <router-link to=\"/\">\n                <img src=\"../assets/back_btn.png\" id=\"back_btn_of_info\">\n            </router-link>\n            <!--  <img src=\"../assets/back_btn.png\" id=\"back_btn\">-->\n        </div>\n        <div id=\"tips\">搜索结果：</div>\n        <div v-if=\"!failed\" id=\"listBox\">\n            <div v-for=\"item in result_list\" :key=\"item.id\" class=\"singleBox\">\n                <div class=\"upBox\">\n                    <img :src=\"item.url\" @click=\"postSearch(item.id, item.name_en, item.name_zh)\" title=\"查看详情\">\n                    <p1 @click=\"postSearch(item.id, item.name_en, item.name_zh)\">{{ item.name_en }}</p1>\n                    <p2 @click=\"postSearch(item.id, item.name_en, item.name_zh)\">中文名：{{ item.name_zh }}</p2>\n                </div>\n                <div class=\"downBox\">\n                    {{ item.info }}\n                </div>\n            </div>\n        </div>\n        <p v-if=\"failed\" id=\"failed_tips\">未查询到结果</p>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"SearchList\"\n}\n</script>\n<script setup>\nimport { ref } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { getLabelFromText } from \"@/apis\"\n\nconst router = useRouter();\nconst route = useRoute();\n\nlet key_words = \"\";\nlet result_list = ref();\nlet failed = ref(false)\n\nif (route.params.from == \"/\") {\n    key_words = route.query.query\n    sessionStorage.setItem(\"query\", key_words)\n}\nelse {\n    key_words = sessionStorage.getItem(\"query\")\n}\n\ngetLabelFromText('api/image/search', key_words).then((value) => {\n    if (value.status == 200) {\n        result_list.value = value.data[\"labels\"]\n        if (result_list.value == null) {\n            failed.value = true\n        }\n    }\n\n})\n\n\nconst postSearch = (id, name_en, name_zh) => {\n    let params = { name_en: name_en, name_zh: name_zh };\n    router.push({ name: 'plant', query: { id: id }, state: { params } })\n}\n\n\n/* let Result_list = ref([\n  {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n  {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n  {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n  {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n  {name_en:\"rose\",name_zh:\"玫瑰花\",url:\"flowers10.jpg\",info:\"玫瑰是温带树种，耐寒，耐旱，对土壤要求不严，在微碱性土地能生长，在富含腐殖质、排水良好的中性或微酸性轻壤土上生长和开花最好，最喜光，在庇荫下生长不良，开花稀少，不耐积水，受涝则下部叶片黄落，萌蘖性很强，生长迅速。 玫瑰在中国古代文学里象征刺客。 玫瑰是英国的国花。 花语：爱情、爱与美、容光焕发，勇敢，高贵。 \"},\n]); */\n\n</script>\n<style scoped>\n#logo {\n    height: 115%;\n    width: auto;\n}\n\n#back_btn_of_info {\n    float: right;\n    height: 80%;\n    width: auto;\n    padding-top: 18px;\n    cursor: pointer;\n    padding-right: 30px;\n}\n\n#tips {\n    padding: 20px;\n    font-size: 30px;\n    color: #cccccc;\n    box-shadow: 0px 0px 10px 0px grey;\n}\n\n#listBox {\n    overflow-x: hidden;\n    overflow-y: scroll;\n    height: 74vh;\n    padding: 20px 50px 50px;\n}\n\n#failed_tips {\n    padding: 20px;\n    font-size: 30px;\n    color: #cccccc;\n}\n\n.singleBox {\n    height: 23%;\n    width: 100%;\n}\n\n.upBox {\n    display: flex;\n    height: 55%;\n    width: 100%;\n    position: relative;\n}\n\n.upBox img {\n    height: 90%;\n    aspect-ratio: 1;\n    object-fit: cover;\n    float: left;\n    border-radius: 20%;\n    cursor: pointer;\n}\n\n.upBox img:hover {\n    box-shadow: 2px 2px 2px 2px grey;\n}\n\n.upBox p1 {\n    float: left;\n    margin-left: 50px;\n    font-size: 400%;\n    color: rgb(10, 10, 10);\n    margin-top: 5px;\n}\n\n.upBox p1:hover,\n.upBox p2:hover {\n    cursor: pointer;\n    color: red;\n    text-decoration: underline;\n}\n\n.upBox p2 {\n    float: left;\n    margin-left: 20px;\n    font-size: 200%;\n    color: rgb(10, 10, 10);\n    margin-top: 28px;\n}\n\n.downBox {\n    width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    font-size: 20px;\n    line-height: 1.5;\n    color: gray;\n}\n</style>\n"],"mappings":";AAgCA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAY;AAChD,SAASC,gBAAgB,QAAQ,QAAQ;AAPzC,MAAAC,WAAA,GAAe;EACXC,IAAI,EAAE;AACV,CAAC;;;;;;IAOD,MAAMC,MAAM,GAAGJ,SAAS,CAAC,CAAC;IAC1B,MAAMK,KAAK,GAAGN,QAAQ,CAAC,CAAC;IAExB,IAAIO,SAAS,GAAG,EAAE;IAClB,IAAIC,WAAW,GAAGT,GAAG,CAAC,CAAC;IACvB,IAAIU,MAAM,GAAGV,GAAG,CAAC,KAAK,CAAC;IAEvB,IAAIO,KAAK,CAACI,MAAM,CAACC,IAAI,IAAI,GAAG,EAAE;MAC1BJ,SAAS,GAAGD,KAAK,CAACM,KAAK,CAACA,KAAK;MAC7BC,cAAc,CAACC,OAAO,CAAC,OAAO,EAAEP,SAAS,CAAC;IAC9C,CAAC,MACI;MACDA,SAAS,GAAGM,cAAc,CAACE,OAAO,CAAC,OAAO,CAAC;IAC/C;IAEAb,gBAAgB,CAAC,kBAAkB,EAAEK,SAAS,CAAC,CAACS,IAAI,CAAEC,KAAK,IAAK;MAC5D,IAAIA,KAAK,CAACC,MAAM,IAAI,GAAG,EAAE;QACrBV,WAAW,CAACS,KAAK,GAAGA,KAAK,CAACE,IAAI,CAAC,QAAQ,CAAC;QACxC,IAAIX,WAAW,CAACS,KAAK,IAAI,IAAI,EAAE;UAC3BR,MAAM,CAACQ,KAAK,GAAG,IAAI;QACvB;MACJ;IAEJ,CAAC,CAAC;IAGF,MAAMG,UAAU,GAAGA,CAACC,EAAE,EAAEC,OAAO,EAAEC,OAAO,KAAK;MACzC,IAAIb,MAAM,GAAG;QAAEY,OAAO,EAAEA,OAAO;QAAEC,OAAO,EAAEA;MAAQ,CAAC;MACnDlB,MAAM,CAACmB,IAAI,CAAC;QAAEpB,IAAI,EAAE,OAAO;QAAEQ,KAAK,EAAE;UAAES,EAAE,EAAEA;QAAG,CAAC;QAAEI,KAAK,EAAE;UAAEf;QAAO;MAAE,CAAC,CAAC;IACxE,CAAC;;IAGD;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}